<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add summary rows using aggregation functions — summary_rows • gt</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Add summary rows using aggregation functions — summary_rows" />

<meta property="og:description" content="Add summary rows to one or more row groups by using the input data already
provided in the gt() function alongside any suitable
aggregation functions. Should we need to obtain the summary data for external
purposes, the extract_summary() can be used with a
gt_tbl object where summary rows were added via summary_rows()." />

<meta property="og:image" content="https://gt.rstudio.com/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gt</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/intro-creating-gt-tables.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">How to Use</li>
    <li>
      <a href="../articles/gt-datasets.html">gt Datasets</a>
    </li>
    <li>
      <a href="../articles/creating-summary-lines.html">Summary Lines</a>
    </li>
    <li class="dropdown-header">Case Studies</li>
    <li>
      <a href="../articles/case-study-gtcars.html">Case Study: gtcars</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/gt">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add summary rows using aggregation functions</h1>
    <small class="dont-index">Source: <a href='https://github.com/rstudio/gt/blob/master/R/summary_rows.R'><code>R/summary_rows.R</code></a></small>
    <div class="hidden name"><code>summary_rows.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Add summary rows to one or more row groups by using the input data already
provided in the <code><a href='gt.html'>gt</a>()</code> function alongside any suitable
aggregation functions. Should we need to obtain the summary data for external
purposes, the <code><a href='extract_summary.html'>extract_summary</a>()</code> can be used with a
<code>gt_tbl</code> object where summary rows were added via <code>summary_rows()</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>summary_rows</span>(<span class='no'>data</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>columns</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>fns</span>,
  <span class='kw'>missing_text</span> <span class='kw'>=</span> <span class='st'>"---"</span>, <span class='kw'>formatter</span> <span class='kw'>=</span> <span class='no'>fmt_number</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a table object that is created using the <code><a href='gt.html'>gt()</a></code> function.</p></td>
    </tr>
    <tr>
      <th>groups</th>
      <td><p>the row groups labels that identify which summary rows will be
added.</p></td>
    </tr>
    <tr>
      <th>columns</th>
      <td><p>the columns for which the summaries should be calculated. If
nothing is provided, then the supplied aggregation functions will be
applied to all columns.</p></td>
    </tr>
    <tr>
      <th>fns</th>
      <td><p>functions used for aggregations. This can include base functions
like <code>mean</code>, <code>min</code>, <code>max</code>, <code>median</code>, <code>sd</code>, or
<code>sum</code> or any other user-defined aggregation function. The function(s)
should be supplied within a <code><a href='https://www.rdocumentation.org/packages/base/topics/list'>list()</a></code>. Within that list, we can specify
the functions by use of function names (e.g., <code>"sum"</code>), the functions
themselves (e.g., <code>sum</code>), or one-sided R formulas by prefacing with a
<code>~</code> where <code>.</code> serves as the data to be summarized (e.g.,
<code><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum(., na.rm = TRUE)</a></code>). By using named arguments, the names will
serve as row labels for the corresponding summary rows (otherwise the
labels will be derived from the function names).</p></td>
    </tr>
    <tr>
      <th>missing_text</th>
      <td><p>the text to be used in place of <code>NA</code> values in
summary cells with no data outputs.</p></td>
    </tr>
    <tr>
      <th>formatter</th>
      <td><p>a formatter function name. These can be any of the
<code>fmt_*()</code>functions available in the package (e.g.,
<code><a href='fmt_number.html'>fmt_number</a>()</code>, <code>link{fmt_percent}()</code>, etc.), or a custom
function using <code><a href='fmt.html'>fmt</a>()</code>. The default function is
<code><a href='fmt_number.html'>fmt_number</a>()</code> and its options can be accessed through
<code>...</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>values passed to the <code>formatter</code> function, where the provided
values are to be in the form of named vectors. For example, when using the
default <code>formatter</code> function, <code><a href='fmt_number.html'>fmt_number</a>()</code>, options such
as <code>decimals</code>, <code>use_seps</code>, and <code>locale</code> can be used.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class <code>gt_tbl</code>.</p>
    
    <h2 class="hasAnchor" id="figures"><a class="anchor" href="#figures"></a>Figures</h2>

    
    <p><img src='figures/man_summary_rows_1.svg' width=100% /></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Use `sp500` to create a gt table with</span>
<span class='co'># row groups; create summary rows (`min`,</span>
<span class='co'># `max`, `avg`) by row group, where each</span>
<span class='co'># each row group is a week number</span>
<span class='no'>tab_1</span> <span class='kw'>&lt;-</span>
  <span class='no'>sp500</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(
    <span class='no'>date</span> <span class='kw'>&gt;=</span> <span class='st'>"2015-01-05"</span> <span class='kw'>&amp;</span>
      <span class='no'>date</span> <span class='kw'>&lt;=</span><span class='st'>"2015-01-16"</span>
  ) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span>(<span class='no'>date</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(
    <span class='kw'>week</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/paste'>paste0</a></span>(
      <span class='st'>"W"</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/strptime'>strftime</a></span>(<span class='no'>date</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='st'>"%V"</span>))
  ) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>select</a></span>(-<span class='no'>adj_close</span>, -<span class='no'>volume</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='gt.html'>gt</a></span>(
    <span class='kw'>rowname_col</span> <span class='kw'>=</span> <span class='st'>"date"</span>,
    <span class='kw'>groupname_col</span> <span class='kw'>=</span> <span class='st'>"week"</span>
  ) <span class='kw'>%&gt;%</span>
  <span class='fu'>summary_rows</span>(
    <span class='kw'>groups</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
    <span class='kw'>columns</span> <span class='kw'>=</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/vars.html'>vars</a></span>(<span class='no'>open</span>, <span class='no'>high</span>, <span class='no'>low</span>, <span class='no'>close</span>),
    <span class='kw'>fns</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(
      <span class='kw'>min</span> <span class='kw'>=</span> ~<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Extremes'>min</a></span>(<span class='no'>.</span>),
      <span class='kw'>max</span> <span class='kw'>=</span> ~<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Extremes'>max</a></span>(<span class='no'>.</span>),
      <span class='kw'>avg</span> <span class='kw'>=</span> ~<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/mean'>mean</a></span>(<span class='no'>.</span>)),
    <span class='kw'>formatter</span> <span class='kw'>=</span> <span class='no'>fmt_number</span>,
    <span class='kw'>use_seps</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
  )</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#figures">Figures</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Richard Iannone, Joe Cheng, Barret Schloerke, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

