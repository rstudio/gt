<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Set data cell colors using a palette or a color function — data_color • gt</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Set data cell colors using a palette or a color function — data_color" />

<meta property="og:description" content="It's possible to add color to data cells according to their values. The
data_color() function colors all rows of any columns supplied.
There are two ways to define how cells are colored: (1) through the use of a
supplied color palette, and (2) through use of a color mapping function
available from the scales package. The first method colorizes cell
data according to whether values are character or numeric. The second method
provides more control over how cells are colored since we provide an explicit
color function and thus other requirements such as bin counts, cut points, or
a numeric domain. Finally, we can choose whether to apply the cell-specific
colors to either the cell background or the cell text." />

<meta property="og:image" content="https://gt.rstudio.com/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gt</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/intro-creating-gt-tables.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">How to Use</li>
    <li>
      <a href="../articles/gt-datasets.html">gt Datasets</a>
    </li>
    <li>
      <a href="../articles/creating-summary-lines.html">Summary Lines</a>
    </li>
    <li class="dropdown-header">Case Studies</li>
    <li>
      <a href="../articles/case-study-gtcars.html">Case Study: gtcars</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/gt">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set data cell colors using a palette or a color function</h1>
    <small class="dont-index">Source: <a href='https://github.com/rstudio/gt/blob/master/R/data_color.R'><code>R/data_color.R</code></a></small>
    <div class="hidden name"><code>data_color.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>It's possible to add color to data cells according to their values. The
<code>data_color()</code> function colors all rows of any <code>columns</code> supplied.
There are two ways to define how cells are colored: (1) through the use of a
supplied color palette, and (2) through use of a color mapping function
available from the <code>scales</code> package. The first method colorizes cell
data according to whether values are character or numeric. The second method
provides more control over how cells are colored since we provide an explicit
color function and thus other requirements such as bin counts, cut points, or
a numeric domain. Finally, we can choose whether to apply the cell-specific
colors to either the cell background or the cell text.</p>
    
    </div>

    <pre class="usage"><span class='fu'>data_color</span>(<span class='no'>data</span>, <span class='no'>columns</span>, <span class='no'>colors</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>apply_to</span> <span class='kw'>=</span> <span class='st'>"bkgd"</span>,
  <span class='kw'>autocolor_text</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a table object that is created using the <code><a href='gt.html'>gt</a>()</code>
function.</p></td>
    </tr>
    <tr>
      <th>columns</th>
      <td><p>the columns wherein changes to cell data colors should occur.</p></td>
    </tr>
    <tr>
      <th>colors</th>
      <td><p>either a color mapping function from the <code>scales</code> package
or a vector of colors to use for each distinct value or level in each of
the provided <code>columns</code>. The color mapping functions are:
<code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>scales::col_quantile()</a></code>, <code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>scales::col_bin()</a></code>,
<code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>scales::col_numeric()</a></code>, and <code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>scales::col_factor()</a></code>. If providing
a vector of colors as a palette, each color value provided must either be a
color name (in the set of colors provided by <code><a href='https://www.rdocumentation.org/packages/grDevices/topics/colors'>grDevices::colors()</a></code>) or
a hexadecimal string in the form of "#RRGGBB" or "#RRGGBBAA".</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>an optional, fixed alpha transparency value that will be applied
to all of the <code>colors</code> provided if they are provided as a vector of
colors. If using a colorizing helper function for <code>colors</code> then this
option is ignored (each of the colorizing helper functions has its own
<code>alpha</code> argument).</p></td>
    </tr>
    <tr>
      <th>apply_to</th>
      <td><p>which style element should the colors be applied to? Options
include the cell background (the default, given as <code>bkgd</code>) or the cell
text (<code>text</code>).</p></td>
    </tr>
    <tr>
      <th>autocolor_text</th>
      <td><p>an option to let <span class="pkg">gt</span> modify the coloring of text
within cells undergoing background coloring. This will in some cases yield
more optimal text-to-background color contrast. By default, this is set to
<code>TRUE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class <code>gt_tbl</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>col_*()</code> functions from the scales package can be used in the
<code>colors</code> argument. These functions map data values (<code>numeric</code> or
<code>factor</code>/<code>character</code>) to colors according to the provided palette.</p>
<ul>
<li><p><code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_numeric</a>()</code>: provides a simple linear mapping
from continuous numeric data to an interpolated palette.</p></li>
<li><p><code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_bin</a>()</code>: provides a mapping of continuous
numeric data to value-based bins. This internally uses the
<code><a href='https://www.rdocumentation.org/packages/base/topics/cut'>cut</a>()</code> function.</p></li>
<li><p><code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_quantile</a>()</code>: provides a mapping of continuous
numeric data to quantiles. This internally uses the
<code><a href='https://www.rdocumentation.org/packages/stats/topics/quantile'>quantile</a>()</code> function.</p></li>
<li><p><code><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_factor</a>()</code>: provides a mapping of factors to
colors. If the palette is discrete and has a different number of colors than
the number of factors, interpolation is used.</p></li>
</ul>
    <p>By default, <span class="pkg">gt</span> will choose the ideal text color (for maximal contrast)
when colorizing the background of data cells. This option can be disabled by
setting <code>autocolor_text</code> to <code>FALSE</code>.</p>
<p>Choosing the right color palette can often be difficult because it's both
hard to discover suitable palettes and then obtain the vector of colors. To
make this process easier we can elect to use the <span class="pkg">paletteer</span> package,
which makes a wide range of palettes from various R packages readily
available. The <code><a href='info_paletteer.html'>info_paletteer</a>()</code> information table allows us to
easily inspect all of the discrete color palettes available in
<span class="pkg">paletteer</span>. We only then need to specify the <code>package</code> and
<code>palette</code> when calling the <code><a href='https://www.rdocumentation.org/packages/paletteer/topics/paletteer_d'>paletteer::paletteer_d()</a></code> function,
and, we get the palette as a vector of hexadecimal colors.</p>
    
    <h2 class="hasAnchor" id="figures"><a class="anchor" href="#figures"></a>Figures</h2>

    
    <p><img src='figures/man_data_color_1.svg' width=100% /></p>
<p><img src='figures/man_data_color_2.svg' width=100% /></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other data formatting functions: <code><a href='fmt_currency.html'>fmt_currency</a></code>,
  <code><a href='fmt_datetime.html'>fmt_datetime</a></code>, <code><a href='fmt_date.html'>fmt_date</a></code>,
  <code><a href='fmt_missing.html'>fmt_missing</a></code>, <code><a href='fmt_number.html'>fmt_number</a></code>,
  <code><a href='fmt_passthrough.html'>fmt_passthrough</a></code>, <code><a href='fmt_percent.html'>fmt_percent</a></code>,
  <code><a href='fmt_scientific.html'>fmt_scientific</a></code>, <code><a href='fmt_time.html'>fmt_time</a></code>,
  <code><a href='fmt.html'>fmt</a></code>, <code><a href='text_transform.html'>text_transform</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># library(paletteer)</span>

<span class='co'># Use `countrypops` to create a gt table;</span>
<span class='co'># Apply a color scale to the `population`</span>
<span class='co'># column with `scales::col_numeric`,</span>
<span class='co'># four supplied colors, and a domain</span>
<span class='no'>tab_1</span> <span class='kw'>&lt;-</span>
  <span class='no'>countrypops</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>country_name</span> <span class='kw'>==</span> <span class='st'>"Mongolia"</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span>(-<span class='fu'><a href='https://www.rdocumentation.org/packages/tidyselect/topics/select_helpers'>contains</a></span>(<span class='st'>"code"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>tail</a></span>(<span class='fl'>10</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='gt.html'>gt</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>data_color</span>(
    <span class='kw'>columns</span> <span class='kw'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars</a></span>(<span class='no'>population</span>),
    <span class='kw'>colors</span> <span class='kw'>=</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_numeric</a></span>(
      <span class='kw'>palette</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(
        <span class='st'>"red"</span>, <span class='st'>"orange"</span>, <span class='st'>"green"</span>, <span class='st'>"blue"</span>),
      <span class='kw'>domain</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.2E7</span>, <span class='fl'>0.4E7</span>))
  )

<span class='co'># Use `pizzaplace` to create a gt table;</span>
<span class='co'># Apply colors from the `red_material`</span>
<span class='co'># palette (in the `ggsci` pkg but</span>
<span class='co'># more easily gotten from the `paletteer`</span>
<span class='co'># package, info at `info_paletteer()`) to</span>
<span class='co'># to `sold` and `income` columns; setting</span>
<span class='co'># the `domain` of `scales::col_numeric()`</span>
<span class='co'># to `NULL` will use the bounds of the</span>
<span class='co'># available data as the domain</span>
<span class='no'>tab_2</span> <span class='kw'>&lt;-</span>
  <span class='no'>pizzaplace</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(
    <span class='no'>type</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"chicken"</span>, <span class='st'>"supreme"</span>)) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>type</span>, <span class='no'>size</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize</a></span>(
    <span class='kw'>sold</span> <span class='kw'>=</span> <span class='fu'>n</span>(),
    <span class='kw'>income</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum</a></span>(<span class='no'>price</span>)
  ) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='gt.html'>gt</a></span>(<span class='kw'>rowname_col</span> <span class='kw'>=</span> <span class='st'>"size"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>data_color</span>(
    <span class='kw'>columns</span> <span class='kw'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars</a></span>(<span class='no'>sold</span>, <span class='no'>income</span>),
    <span class='kw'>colors</span> <span class='kw'>=</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/scales/topics/col_numeric'>col_numeric</a></span>(
      <span class='kw'>palette</span> <span class='kw'>=</span> <span class='kw pkg'>paletteer</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/paletteer/topics/paletteer_d'>paletteer_d</a></span>(
        <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"ggsci"</span>,
        <span class='kw'>palette</span> <span class='kw'>=</span> <span class='st'>"red_material"</span>
        ),
      <span class='kw'>domain</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)
  )</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#figures">Figures</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Richard Iannone, Joe Cheng, Barret Schloerke, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

