<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add grand summary rows using aggregation functions — grand_summary_rows • gt</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add grand summary rows using aggregation functions — grand_summary_rows" />
<meta property="og:description" content="Add grand summary rows to the gt table by using applying aggregation
functions to the table data. The summary rows incorporate all of the
available data, regardless of whether some of the data are part of row
groups. You choose how to format the values in the resulting summary cells by
use of a formatter function (e.g, fmt_number) and any relevant options." />
<meta property="og:image" content="https://gt.rstudio.com/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gt</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/intro-creating-gt-tables.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">How to Use</li>
    <li>
      <a href="../articles/gt-datasets.html">gt Datasets</a>
    </li>
    <li>
      <a href="../articles/creating-summary-lines.html">Summary Lines</a>
    </li>
    <li class="dropdown-header">Case Studies</li>
    <li>
      <a href="../articles/case-study-gtcars.html">Case Study: gtcars</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/gt">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add grand summary rows using aggregation functions</h1>
    <small class="dont-index">Source: <a href='https://github.com/rstudio/gt/blob/master/R/summary_rows.R'><code>R/summary_rows.R</code></a></small>
    <div class="hidden name"><code>grand_summary_rows.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Add grand summary rows to the <strong>gt</strong> table by using applying aggregation
functions to the table data. The summary rows incorporate all of the
available data, regardless of whether some of the data are part of row
groups. You choose how to format the values in the resulting summary cells by
use of a <code>formatter</code> function (e.g, <code>fmt_number</code>) and any relevant options.</p>
    </div>

    <pre class="usage"><span class='fu'>grand_summary_rows</span>(
  <span class='no'>data</span>,
  <span class='kw'>columns</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>fns</span>,
  <span class='kw'>missing_text</span> <span class='kw'>=</span> <span class='st'>"---"</span>,
  <span class='kw'>formatter</span> <span class='kw'>=</span> <span class='no'>fmt_number</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A table object that is created using the <code><a href='gt.html'>gt()</a></code> function.</p></td>
    </tr>
    <tr>
      <th>columns</th>
      <td><p>The columns for which the summaries should be calculated.</p></td>
    </tr>
    <tr>
      <th>fns</th>
      <td><p>Functions used for aggregations. This can include base functions
like <code>mean</code>, <code>min</code>, <code>max</code>, <code>median</code>, <code>sd</code>, or <code>sum</code> or any other
user-defined aggregation function. The function(s) should be supplied
within a <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code>. Within that list, we can specify the functions by use of
function names in quotes (e.g., <code>"sum"</code>), as bare functions (e.g., <code>sum</code>),
or as one-sided R formulas using a leading <code>~</code>. In the formula
representation, a <code>.</code> serves as the data to be summarized (e.g., <code><a href='https://rdrr.io/r/base/sum.html'>sum(., na.rm = TRUE)</a></code>). The use of named arguments is recommended as the names
will serve as summary row labels for the corresponding summary rows data
(the labels can derived from the function names but only when not providing
bare function names).</p></td>
    </tr>
    <tr>
      <th>missing_text</th>
      <td><p>The text to be used in place of <code>NA</code> values in summary
cells with no data outputs.</p></td>
    </tr>
    <tr>
      <th>formatter</th>
      <td><p>A formatter function name. These can be any of the <code>fmt_*()</code>
functions available in the package (e.g., <code><a href='fmt_number.html'>fmt_number()</a></code>, <code><a href='fmt_percent.html'>fmt_percent()</a></code>,
etc.), or a custom function using <code><a href='fmt.html'>fmt()</a></code>. The default function is
<code><a href='fmt_number.html'>fmt_number()</a></code> and its options can be accessed through <code>...</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Values passed to the <code>formatter</code> function, where the provided
values are to be in the form of named vectors. For example, when using the
default <code>formatter</code> function, <code><a href='fmt_number.html'>fmt_number()</a></code>, options such as <code>decimals</code>,
<code>use_seps</code>, and <code>locale</code> can be used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>gt_tbl</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Should we need to obtain the summary data for external purposes, the
<code><a href='extract_summary.html'>extract_summary()</a></code> function can be used with a <code>gt_tbl</code> object where grand
summary rows were added via <code>grand_summary_rows()</code>.</p>
    <h2 class="hasAnchor" id="figures"><a class="anchor" href="#figures"></a>Figures</h2>

    

<p><img src='figures/man_grand_summary_rows_1.png' width=100% /></p>
    <h2 class="hasAnchor" id="function-id"><a class="anchor" href="#function-id"></a>Function ID</h2>

    

<p>6-2</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other Add Rows: 
<code><a href='summary_rows.html'>summary_rows</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Use `sp500` to create a gt table with</span>
<span class='co'># row groups; create grand summary rows</span>
<span class='co'># (`min`, `max`, `avg`) for the table</span>
<span class='no'>tab_1</span> <span class='kw'>&lt;-</span>
  <span class='no'>sp500</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(
    <span class='no'>date</span> <span class='kw'>&gt;=</span> <span class='st'>"2015-01-05"</span> <span class='kw'>&amp;</span>
      <span class='no'>date</span> <span class='kw'>&lt;=</span><span class='st'>"2015-01-16"</span>
  ) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span>(<span class='no'>date</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(
    <span class='kw'>week</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(
      <span class='st'>"W"</span>, <span class='fu'><a href='https://rdrr.io/r/base/strptime.html'>strftime</a></span>(<span class='no'>date</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='st'>"%V"</span>))
  ) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span>(-<span class='no'>adj_close</span>, -<span class='no'>volume</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='gt.html'>gt</a></span>(
    <span class='kw'>rowname_col</span> <span class='kw'>=</span> <span class='st'>"date"</span>,
    <span class='kw'>groupname_col</span> <span class='kw'>=</span> <span class='st'>"week"</span>
  ) <span class='kw'>%&gt;%</span>
  <span class='fu'>grand_summary_rows</span>(
    <span class='kw'>columns</span> <span class='kw'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars</a></span>(<span class='no'>open</span>, <span class='no'>high</span>, <span class='no'>low</span>, <span class='no'>close</span>),
    <span class='kw'>fns</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
      <span class='kw'>min</span> <span class='kw'>=</span> ~<span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>(<span class='no'>.</span>),
      <span class='kw'>max</span> <span class='kw'>=</span> ~<span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>.</span>),
      <span class='kw'>avg</span> <span class='kw'>=</span> ~<span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>.</span>)),
    <span class='kw'>formatter</span> <span class='kw'>=</span> <span class='no'>fmt_number</span>,
    <span class='kw'>use_seps</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
  )</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Richard Iannone, Joe Cheng, Barret Schloerke, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


