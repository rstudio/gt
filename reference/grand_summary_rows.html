<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Add grand summary rows by using the table data and any suitable aggregation
functions. With grand summary rows, all of the available data in the gt
table is incorporated (regardless of whether some of the data are part of row
groups). Multiple grand summary rows can be added via expressions given to
fns. You can selectively format the values in the resulting grand summary
cells by use of formatting expressions in fmt."><title>Add grand summary rows using aggregation functions — grand_summary_rows • gt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Add grand summary rows using aggregation functions — grand_summary_rows"><meta property="og:description" content="Add grand summary rows by using the table data and any suitable aggregation
functions. With grand summary rows, all of the available data in the gt
table is incorporated (regardless of whether some of the data are part of row
groups). Multiple grand summary rows can be added via expressions given to
fns. You can selectively format the values in the resulting grand summary
cells by use of formatting expressions in fmt."><meta property="og:image" content="https://gt.rstudio.com/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.10.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/gt.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/case-study-clinical-tables.html">Case Study: Clinical Tables</a>
    <a class="dropdown-item" href="../articles/case-study-gtcars.html">Case Study: gtcars</a>
    <a class="dropdown-item" href="../articles/creating-summary-lines.html">Creating Summary Lines</a>
    <a class="dropdown-item" href="../articles/gt-datasets.html">gt Datasets</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://posit.co/blog/new-features-in-gt-0-10-0/">Version 0.10.0</a>
    <a class="external-link dropdown-item" href="https://posit.co/blog/?search=gt%2520%25200.9.0">Version 0.9.0</a>
    <a class="external-link dropdown-item" href="https://posit.co/blog/new-features-upgrades-in-gt-0-8-0/">Version 0.8.0</a>
    <a class="external-link dropdown-item" href="https://posit.co/blog/all-new-things-in-gt-0-7-0/">Version 0.7.0</a>
    <a class="external-link dropdown-item" href="https://posit.co/blog/changes-for-the-better-in-gt-0-6-0/">Version 0.6.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/gt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Add grand summary rows using aggregation functions</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/gt/blob/HEAD/R/summary_rows.R" class="external-link"><code>R/summary_rows.R</code></a></small>
      <div class="d-none name"><code>grand_summary_rows.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add grand summary rows by using the table data and any suitable aggregation
functions. With grand summary rows, all of the available data in the <strong>gt</strong>
table is incorporated (regardless of whether some of the data are part of row
groups). Multiple grand summary rows can be added via expressions given to
<code>fns</code>. You can selectively format the values in the resulting grand summary
cells by use of formatting expressions in <code>fmt</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">grand_summary_rows</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  fns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fmt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  side <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bottom"</span>, <span class="st">"top"</span><span class="op">)</span>,</span>
<span>  missing_text <span class="op">=</span> <span class="st">"---"</span>,</span>
<span>  formatter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p><em>The gt table data object</em></p>
<p><code>obj:&lt;gt_tbl&gt;</code> // <strong>required</strong></p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code><a href="gt.html">gt()</a></code> function.</p></dd>


<dt>columns</dt>
<dd><p><em>Columns to target</em></p>
<p><code>&lt;column-targeting expression&gt;</code> // <em>default:</em> <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code></p>
<p>The columns for which the summaries should be calculated. Can either
be a series of column names provided in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>, a vector of column indices,
or a select helper function. Examples of select helper functions include
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of()</a></code>,
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">num_range()</a></code>, and <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code>.</p></dd>


<dt>fns</dt>
<dd><p><em>Aggregation Expressions</em></p>
<p><code>&lt;expression|list of expressions&gt;</code></p>
<p>Functions used for aggregations. This can include base functions like
<code>mean</code>, <code>min</code>, <code>max</code>, <code>median</code>, <code>sd</code>, or <code>sum</code> or any other user-defined
aggregation function. Multiple functions, each of which would generate a
different row, are to be supplied within a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>. We can specify the
functions by use of function names in quotes (e.g., <code>"sum"</code>), as bare
functions (e.g., <code>sum</code>), or in formula form (e.g., <code>minimum ~ min(.)</code>)
where the LHS could be used to supply the summary row label and ID values.
More information on this can be found in the
<em>Aggregation expressions for <code>fns</code></em> section.</p></dd>


<dt>fmt</dt>
<dd><p><em>Formatting expressions</em></p>
<p><code>&lt;expression|list of expressions&gt;</code></p>
<p>Formatting expressions in formula form. The RHS of <code>~</code> should contain a
formatting call (e.g., <code>~ fmt_number(., decimals = 3, use_seps = FALSE</code>).
Optionally, the LHS could contain a group-targeting expression (e.g.,
<code>"group_a" ~ fmt_number(.)</code>). More information on this can be found in the
<em>Formatting expressions for <code>fmt</code></em> section.</p></dd>


<dt>side</dt>
<dd><p><em>Side used for placement of grand summary rows</em></p>
<p><code>singl-kw:[bottom|top]</code> // <em>default:</em> <code>"bottom"</code></p>
<p>Should the grand summary rows be placed at the <code>"bottom"</code> (the default) or
the <code>"top"</code> of the table?</p></dd>


<dt>missing_text</dt>
<dd><p><em>Replacement text for <code>NA</code> values</em></p>
<p><code>scalar&lt;character&gt;</code> // <em>default:</em> <code>"---"</code></p>
<p>The text to be used in place of <code>NA</code> values in summary cells with no data
outputs.</p></dd>


<dt>formatter</dt>
<dd><p><em><a href="https://rdrr.io/r/base/Deprecated.html" class="external-link">Deprecated</a> Formatting function</em></p>
<p><code>&lt;expression&gt;</code></p>
<p>Deprecated, please use <code>fmt</code> instead. This was previously used as a way to
input a formatting function name, which could be any of the <code>fmt_*()</code>
functions available in the package (e.g., <code><a href="fmt_number.html">fmt_number()</a></code>, <code><a href="fmt_percent.html">fmt_percent()</a></code>,
etc.), or a custom function using <code><a href="fmt.html">fmt()</a></code>. The options of a formatter can
be accessed through <code>...</code>.</p></dd>


<dt>...</dt>
<dd><p><em><a href="https://rdrr.io/r/base/Deprecated.html" class="external-link">Deprecated</a> Formatting arguments</em></p>
<p><code>&lt;Named arguments&gt;</code></p>
<p>Deprecated (along with <code>formatter</code>) but otherwise used for argument values
for a formatting function supplied in <code>formatter</code>. For example, if using
<code>formatter = fmt_number</code>, options such as <code>decimals = 1</code>, <code>use_seps = FALSE</code>, and the like can be used here.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>gt_tbl</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="using-columns-to-target-column-data-for-aggregation">Using <code>columns</code> to target column data for aggregation<a class="anchor" aria-label="anchor" href="#using-columns-to-target-column-data-for-aggregation"></a></h2>
    


<p>Targeting of column data for which aggregates should be generated is done
through the <code>columns</code> argument. We can declare column names in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> (with
bare column names or names in quotes) or we can use
<strong>tidyselect</strong>-style expressions. This can be as basic as supplying a select
helper like <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, or, providing a more complex incantation like</p>
<p><code>where(~ is.numeric(.x) &amp;&amp; max(.x, na.rm = TRUE) &gt; 1E6)</code></p>
<p>which targets numeric columns that have a maximum value greater than
1,000,000 (excluding any <code>NA</code>s from consideration).</p>
<p>By default all columns are selected (with the <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code> default). This
default may be not what's needed unless all columns can undergo useful
aggregation by expressions supplied in <code>fns</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="aggregation-expressions-for-fns">Aggregation expressions for <code>fns</code><a class="anchor" aria-label="anchor" href="#aggregation-expressions-for-fns"></a></h2>
    


<p>There are a number of ways to express how an aggregation should work for
each summary row. In addition to that, we have the ability to pass important
information such as the summary row ID value and its label (the former
necessary for targeting within <code><a href="tab_style.html">tab_style()</a></code> or <code><a href="tab_footnote.html">tab_footnote()</a></code> and the
latter used for display in the rendered table). Here are a number of
instructive examples for how to supply such expressions.</p><div class="section">
<h3 id="double-sided-formula-with-everything-supplied">Double-sided formula with everything supplied<a class="anchor" aria-label="anchor" href="#double-sided-formula-with-everything-supplied"></a></h3>


<p>We can be explicit and provide a double-sided formula (in the form
<code>&lt;LHS&gt; ~ &lt;RHS&gt;</code>) that expresses everything about a summary row. That is, it
has an aggregation expression (where <code>.</code> represents the data in the
focused column). Here's an example:</p>
<p><code>list(id = "minimum", label = "min") ~ min(., na.rm = TRUE)</code></p>
<p>The left side (the list) contains named elements that identify the <code>id</code> and
<code>label</code> for the summary row. The right side has an expression for obtaining
a minimum value (dropping <code>NA</code> values in the calculation).</p>
<p>The <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> can be replaced with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> but the advantage of a list is
allowing the use of the <code><a href="md.html">md()</a></code> and <code><a href="html.html">html()</a></code> helper functions. The above
example can be written as:</p>
<p><code>list(id = "minimum", label = md("**Minimum**")) ~ min(., na.rm = TRUE)</code></p>
<p>and we can have that label value interpreted as Markdown text.</p>
</div>

<div class="section">
<h3 id="function-names-in-quotes">Function names in quotes<a class="anchor" aria-label="anchor" href="#function-names-in-quotes"></a></h3>


<p>With <code>fns = "min"</code> we get the equivalent of the fuller expression:</p>
<p><code>list(id = "min", label = "min") ~ min(., na.rm = TRUE)</code></p>
<p>For sake of convenience, common aggregation functions with the <code>na.rm</code>
argument will be rewritten with the <code>na.rm = TRUE</code> option. These functions
are: <code>"min"</code>, <code>"max"</code>, <code>"mean"</code>, <code>"median"</code>, <code>"sd"</code>, and <code>"sum"</code>.</p>
<p>Should you need to specify multiple aggregation functions in this way (giving
you multiple summary rows), use <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> or <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p>
</div>

<div class="section">
<h3 id="rhs-formula-expressions">RHS formula expressions<a class="anchor" aria-label="anchor" href="#rhs-formula-expressions"></a></h3>


<p>With <code>fns = ~ min(.)</code> or <code>fns = list(~ min(.))</code>, <strong>gt</strong> will use the function
name as the <code>id</code> and <code>label</code>. The expansion of this shorthand to full form
looks like this:</p>
<p><code>list(id = "min", label = "min") ~ min(.)</code></p>
<p>The RHS expression is kept as written and the name portion is both the <code>id</code>
and the <code>label</code>.</p>
</div>

<div class="section">
<h3 id="named-vector-or-list-with-rhs-formula-expression">Named vector or list with RHS formula expression<a class="anchor" aria-label="anchor" href="#named-vector-or-list-with-rhs-formula-expression"></a></h3>


<p>Using <code>fns = c(minimum = ~ min(.))</code> or <code>fns = list(minimum = ~ min(.))</code>
expands to this:</p>
<p><code>list(id = "minimum", label = "minimum") ~ min(.)</code></p>
</div>

<div class="section">
<h3 id="unnamed-vector-or-list-with-rhs-formula-expression">Unnamed vector or list with RHS formula expression<a class="anchor" aria-label="anchor" href="#unnamed-vector-or-list-with-rhs-formula-expression"></a></h3>


<p>With <code>fns = c("minimum", "min") ~ min(.)</code> or
<code>fns = list("minimum", "min") ~ min(.)</code> the LHS contains the <code>label</code> and <code>id</code>
values and, importantly, the order is <code>label</code> first and <code>id</code> second. This can
be rewritten as:</p>
<p><code>list(id = "min", label = "minimum") ~ min(.)</code></p>
<p>If the vector or list is partially named, <strong>gt</strong> has enough to go on to
disambiguate the unnamed element. So with
<code>fns = c("minimum", label = "min") ~ min(.)</code>, <code>"min"</code> is indeed the <code>label</code>
and <code>"minimum"</code> is taken as the <code>id</code> value.</p>
</div>

<div class="section">
<h3 id="a-fully-named-list-with-three-specific-elements">A fully named list with three specific elements<a class="anchor" aria-label="anchor" href="#a-fully-named-list-with-three-specific-elements"></a></h3>


<p>We can avoid using a formula if we are satisfied with the default options of
a function (except some of those functions with the <code>na.rm</code> options, see
above). Instead, a list with the named elements <code>id</code>, <code>label</code>, and <code>fn</code> could
be used. It can look like this:</p>
<p><code>fns = list(id = "mean_id", label = "average", fn = "mean")</code></p>
<p>which translates to</p>
<p><code>list(id = "mean_id", label = "average") ~ mean(., na.rm = TRUE)</code></p>
</div>

    </div>
    <div class="section level2">
    <h2 id="formatting-expressions-for-fmt">Formatting expressions for <code>fmt</code><a class="anchor" aria-label="anchor" href="#formatting-expressions-for-fmt"></a></h2>
    


<p>Given that we are generating new data in a table, we might also want to
take the opportunity to format those new values right away. We can do this
in the <code>fmt</code> argument, either with a single expression or a number of them
in a list.</p>
<p>We can supply a one-sided (RHS only) expression to <code>fmt</code>, and, several can
be provided in a list. The expression uses a formatting function (e.g.,
<code><a href="fmt_number.html">fmt_number()</a></code>, <code><a href="fmt_currency.html">fmt_currency()</a></code>, etc.) and it must contain an initial <code>.</code>
that stands for the data object. If performing numeric formatting on all
columns in the new grand summary rows, it might look something like this:</p>
<p><code>fmt = ~ fmt_number(., decimals = 1, use_seps = FALSE)</code></p>
<p>We can use the <code>columns</code> and <code>rows</code> arguments that are available in every
formatting function. This allows us to format only a subset of columns or
rows. Summary rows can be targeted by using their ID values and these are
settable within expressions given to <code>fns</code> (see the <em>Aggregation expressions
for <code>fns</code></em> section for details on this). Here's an example with hypothetical
column and row names:</p>
<p><code>fmt = ~ fmt_number(., columns = num, rows = "mean", decimals = 3)</code></p>
    </div>
    <div class="section level2">
    <h2 id="extraction-of-summary-rows">Extraction of summary rows<a class="anchor" aria-label="anchor" href="#extraction-of-summary-rows"></a></h2>
    


<p>Should we need to obtain the summary data for external purposes, the
<code><a href="extract_summary.html">extract_summary()</a></code> function can be used with a <code>gt_tbl</code> object where summary
rows were added via <code>grand_summary_rows()</code> or <code><a href="summary_rows.html">summary_rows()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    


<p>Use a modified version of the <code><a href="sp500.html">sp500</a></code> dataset to create a <strong>gt</strong> table with
row groups and row labels. Create the grand summary rows <code>min</code>, <code>max</code>, and
<code>avg</code> for the table with the <code>grand_summary_rows()</code> function.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">sp500</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span> <span class="op">&gt;=</span> <span class="st">"2015-01-05"</span> <span class="op">&amp;</span> <span class="va">date</span> <span class="op">&lt;=</span> <span class="st">"2015-01-16"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>week <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"W"</span>, <span class="fu"><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strftime</a></span><span class="op">(</span><span class="va">date</span>, format <span class="op">=</span> <span class="st">"%V"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">adj_close</span>, <span class="op">-</span><span class="va">volume</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span></span>
<span>    rowname_col <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>    groupname_col <span class="op">=</span> <span class="st">"week"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/grand_summary_rows.html">grand_summary_rows</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">open</span>, <span class="va">high</span>, <span class="va">low</span>, <span class="va">close</span><span class="op">)</span>,</span>
<span>    fns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="va">min</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>,</span>
<span>      <span class="va">max</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>,</span>
<span>      <span class="va">avg</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    fmt <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="../reference/fmt_number.html">fmt_number</a></span><span class="op">(</span><span class="va">.</span>, use_seps <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_grand_summary_rows_1.png" alt="This image of a table was generated from the first code example in the `grand_summary_rows()` help file." style="width:100%;"></p>
<p>Let's take the <code><a href="countrypops.html">countrypops</a></code> dataset and process that a bit before handing
it off to <strong>gt</strong>. We can create a single grand summary row with totals that
appears at the top of the table body (with <code>side = "top"</code>). We can define the
aggregation with a list that contains parameters for the grand summary row
label (<code>"TOTALS"</code>), the ID value of that row (<code>"totals"</code>), and the
aggregation function (expressed as <code>"sum"</code>, which <strong>gt</strong> recognizes as the
<code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code> function). Finally, we'll add a background fill to the grand summary
row with <code><a href="tab_style.html">tab_style()</a></code>.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">countrypops</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">country_code_2</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BE"</span>, <span class="st">"NL"</span>, <span class="st">"LU"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">10</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">country_name</span>, <span class="va">year</span>, <span class="va">population</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">year</span>, values_from <span class="op">=</span> <span class="va">population</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span>rowname_col <span class="op">=</span> <span class="st">"country_name"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_header.html">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Populations of the Benelux Countries"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Year"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_integer.html">fmt_integer</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/grand_summary_rows.html">grand_summary_rows</a></span><span class="op">(</span></span>
<span>    fns <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"TOTALS"</span>, id <span class="op">=</span> <span class="st">"totals"</span>, fn <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>,</span>
<span>    fmt <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="../reference/fmt_integer.html">fmt_integer</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>,</span>
<span>    side <span class="op">=</span> <span class="st">"top"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_style.html">tab_style</a></span><span class="op">(</span></span>
<span>    locations <span class="op">=</span> <span class="fu"><a href="../reference/cells_grand_summary.html">cells_grand_summary</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    style <span class="op">=</span> <span class="fu"><a href="../reference/cell_fill.html">cell_fill</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"lightblue"</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/adjust_luminance.html">adjust_luminance</a></span><span class="op">(</span>steps <span class="op">=</span> <span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_grand_summary_rows_2.png" alt="This image of a table was generated from the second code example in the `grand_summary_rows()` help file." style="width:100%;"></p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>
    

<p>6-2</p>
    </div>
    <div class="section level2">
    <h2 id="function-introduced">Function Introduced<a class="anchor" aria-label="anchor" href="#function-introduced"></a></h2>
    

<p><code>v0.2.0.5</code> (March 31, 2020)</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other row addition/modification functions: 
<code><a href="row_group_order.html">row_group_order</a>()</code>,
<code><a href="rows_add.html">rows_add</a>()</code>,
<code><a href="summary_rows.html">summary_rows</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Richard Iannone, Joe Cheng, Barret Schloerke, Ellis Hughes, Alexandra Lauer, <a href="https://jooyoungseo.github.io/" class="external-link">JooYoung Seo</a>, Ken Brevoort, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer></div>

  

  

  </body></html>

