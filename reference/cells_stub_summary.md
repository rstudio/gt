# Location helper for targeting the stub cells in a summary

`cells_stub_summary()` is used to target the stub cells of summary and
it is useful when applying a footnote with
[`tab_footnote()`](https://gt.rstudio.com/reference/tab_footnote.md) or
adding custom styles with
[`tab_style()`](https://gt.rstudio.com/reference/tab_style.md). The
function is expressly used in each of those functions' `locations`
argument. The 'stub_summary' location is generated by
[`summary_rows()`](https://gt.rstudio.com/reference/summary_rows.md).

## Usage

``` r
cells_stub_summary(groups = everything(), rows = everything())
```

## Arguments

- groups:

  *Specification of row group IDs*

  `<row-group-targeting expression>` // *default:*
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)

  The row groups to which targeting operations are constrained. Can
  either be a series of row group ID values provided in
  [`c()`](https://rdrr.io/r/base/c.html) or a select helper function
  (e.g.
  [`starts_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`ends_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`contains()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`matches()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`num_range()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  and
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)).

- rows:

  *Rows to target*

  `<row-targeting expression>` // *default:*
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)

  In conjunction with `groups`, we can specify which of their rows
  should form a constraint for targeting operations. The default
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)
  results in all rows in `columns` being formatted. Alternatively, we
  can supply a vector of row IDs within
  [`c()`](https://rdrr.io/r/base/c.html), a vector of row indices, or a
  select helper function (e.g.
  [`starts_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`ends_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`contains()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`matches()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`num_range()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  and
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)).
  We can also use expressions to filter down to the rows we need (e.g.,
  `[colname_1] > 100 & [colname_2] < 50`).

## Value

A list object with the classes `cells_stub_summary` and
`location_cells`.

## Targeting summary stub cells with `groups` and `rows`

Targeting the stub cells of group summary rows is done through the
`groups` and `rows` arguments. By default `groups` is set to
[`everything()`](https://tidyselect.r-lib.org/reference/everything.html),
which means that all available groups will be considered. Providing the
ID values (in quotes) of row groups in
[`c()`](https://rdrr.io/r/base/c.html) will serve to constrain the
targeting to that subset of groups.

Once the groups are targeted, we may also target the `rows` of the
summary. Summary cells in the stub will have ID values that can be used
much like column names in the `columns`-targeting scenario. We can use
simpler **tidyselect**-style expressions (the select helpers should work
well here) and we can use quoted row identifiers in
[`c()`](https://rdrr.io/r/base/c.html). It's also possible to use row
indices (e.g., `c(3, 5, 6)`) that correspond to the row number of a
summary row in a row group (numbering restarts with every row group).

## Examples

Use a portion of the
[`countrypops`](https://gt.rstudio.com/reference/countrypops.md) dataset
to create a **gt** table. Add some styling to the summary data stub
cells with
[`tab_style()`](https://gt.rstudio.com/reference/tab_style.md) and
`cells_stub_summary()` in the `locations` argument.

    countrypops |>
      dplyr::filter(country_name == "Japan", year < 1970) |>
      dplyr::select(-contains("country")) |>
      dplyr::mutate(decade = paste0(substr(year, 1, 3), "0s")) |>
      gt(
        rowname_col = "year",
        groupname_col = "decade"
      ) |>
      fmt_integer(columns = population) |>
      summary_rows(
        groups = "1960s",
        columns = population,
        fns = list("min", "max"),
        fmt = ~ fmt_integer(.)
      ) |>
      tab_style(
        style = list(
          cell_text(
            weight = "bold",
            transform = "capitalize"
          ),
          cell_fill(
            color = "lightblue",
            alpha = 0.5
          )
        ),
        locations = cells_stub_summary(
          groups = "1960s"
        )
      )

![This image of a table was generated from the first code example in the
\`cells_stub_summary()\` help
file.](https://raw.githubusercontent.com/rstudio/gt/master/images/man_cells_stub_summary_1.png)

## Function ID

8-21

## Function Introduced

`v0.3.0` (May 12, 2021)

## See also

Other location helper functions:
[`cells_body()`](https://gt.rstudio.com/reference/cells_body.md),
[`cells_column_labels()`](https://gt.rstudio.com/reference/cells_column_labels.md),
[`cells_column_spanners()`](https://gt.rstudio.com/reference/cells_column_spanners.md),
[`cells_footnotes()`](https://gt.rstudio.com/reference/cells_footnotes.md),
[`cells_grand_summary()`](https://gt.rstudio.com/reference/cells_grand_summary.md),
[`cells_row_groups()`](https://gt.rstudio.com/reference/cells_row_groups.md),
[`cells_source_notes()`](https://gt.rstudio.com/reference/cells_source_notes.md),
[`cells_stub()`](https://gt.rstudio.com/reference/cells_stub.md),
[`cells_stub_grand_summary()`](https://gt.rstudio.com/reference/cells_stub_grand_summary.md),
[`cells_stubhead()`](https://gt.rstudio.com/reference/cells_stubhead.md),
[`cells_summary()`](https://gt.rstudio.com/reference/cells_summary.md),
[`cells_title()`](https://gt.rstudio.com/reference/cells_title.md),
[`location-helper`](https://gt.rstudio.com/reference/location-helper.md)
