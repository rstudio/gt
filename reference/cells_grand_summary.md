# Location helper for targeting cells in a grand summary

`cells_grand_summary()` is used to target the cells in a grand summary
and it is useful when applying a footnote with
[`tab_footnote()`](https://gt.rstudio.com/reference/tab_footnote.md) or
adding custom styles with
[`tab_style()`](https://gt.rstudio.com/reference/tab_style.md). The
function is expressly used in each of those functions' `locations`
argument. The 'grand_summary' location is generated by
[`grand_summary_rows()`](https://gt.rstudio.com/reference/grand_summary_rows.md).

## Usage

``` r
cells_grand_summary(columns = everything(), rows = everything())
```

## Arguments

- columns:

  *Columns to target*

  `<column-targeting expression>` // *default:*
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)

  The columns to which targeting operations are constrained. Can either
  be a series of column names provided in
  [`c()`](https://rdrr.io/r/base/c.html), a vector of column indices, or
  a select helper function (e.g.
  [`starts_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`ends_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`contains()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`matches()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`num_range()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  and
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)).

- rows:

  *Rows to target*

  `<row-targeting expression>` // *default:*
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)

  In conjunction with `columns`, we can specify which of their rows
  should form a constraint for targeting operations. The default
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)
  results in all rows in `columns` being formatted. Alternatively, we
  can supply a vector of row IDs within
  [`c()`](https://rdrr.io/r/base/c.html), a vector of row indices, or a
  select helper function (e.g.
  [`starts_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`ends_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`contains()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`matches()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  [`num_range()`](https://tidyselect.r-lib.org/reference/starts_with.html),
  and
  [`everything()`](https://tidyselect.r-lib.org/reference/everything.html)).
  We can also use expressions to filter down to the rows we need (e.g.,
  `[colname_1] > 100 & [colname_2] < 50`).

## Value

A list object with the classes `cells_grand_summary` and
`location_cells`.

## Targeting cells with `columns` and `rows`

Targeting of grand summary cells is done through the `columns` and
`rows` arguments. The `columns` argument allows us to target a subset of
grand summary cells contained in the resolved columns. We say resolved
because aside from declaring column names in
[`c()`](https://rdrr.io/r/base/c.html) (with bare column names or names
in quotes) we can use **tidyselect**-style expressions. This can be as
basic as supplying a select helper like
[`starts_with()`](https://tidyselect.r-lib.org/reference/starts_with.html),
or, providing a more complex incantation like

`where(~ is.numeric(.x) & max(.x, na.rm = TRUE) > 1E6)`

which targets numeric columns that have a maximum value greater than
1,000,000 (excluding any `NA`s from consideration).

Once the columns are targeted, we may also target the `rows` of the
grand summary. Grand summary cells in the stub will have ID values that
can be used much like column names in the `columns`-targeting scenario.
We can use simpler **tidyselect**-style expressions (the select helpers
should work well here) and we can use quoted row identifiers in
[`c()`](https://rdrr.io/r/base/c.html). It's also possible to use row
indices (e.g., `c(3, 5, 6)`) that correspond to the row number of a
grand summary row.

## Examples

Use a portion of the
[`countrypops`](https://gt.rstudio.com/reference/countrypops.md) dataset
to create a **gt** table. Add some styling to a grand summary cells with
[`tab_style()`](https://gt.rstudio.com/reference/tab_style.md) and
`cells_grand_summary()` in the `locations` argument.

    countrypops |>
      dplyr::filter(country_name == "Spain", year < 1970) |>
      dplyr::select(-contains("country")) |>
      gt(rowname_col = "year") |>
      fmt_number(
        columns = population,
        decimals = 0
      ) |>
      grand_summary_rows(
        columns = population,
        fns = change ~ max(.) - min(.),
        fmt = ~ fmt_integer(.)
      ) |>
      tab_style(
        style = list(
          cell_text(style = "italic"),
          cell_fill(color = "lightblue")
        ),
        locations = cells_grand_summary(
          columns = population,
          rows = 1
        )
      )

![This image of a table was generated from the first code example in the
\`cells_grand_summary()\` help
file.](https://raw.githubusercontent.com/rstudio/gt/master/images/man_cells_grand_summary_1.png)

## Function ID

8-20

## Function Introduced

`v0.2.0.5` (March 31, 2020)

## See also

Other location helper functions:
[`cells_body()`](https://gt.rstudio.com/reference/cells_body.md),
[`cells_column_labels()`](https://gt.rstudio.com/reference/cells_column_labels.md),
[`cells_column_spanners()`](https://gt.rstudio.com/reference/cells_column_spanners.md),
[`cells_footnotes()`](https://gt.rstudio.com/reference/cells_footnotes.md),
[`cells_row_groups()`](https://gt.rstudio.com/reference/cells_row_groups.md),
[`cells_source_notes()`](https://gt.rstudio.com/reference/cells_source_notes.md),
[`cells_stub()`](https://gt.rstudio.com/reference/cells_stub.md),
[`cells_stub_grand_summary()`](https://gt.rstudio.com/reference/cells_stub_grand_summary.md),
[`cells_stub_summary()`](https://gt.rstudio.com/reference/cells_stub_summary.md),
[`cells_stubhead()`](https://gt.rstudio.com/reference/cells_stubhead.md),
[`cells_summary()`](https://gt.rstudio.com/reference/cells_summary.md),
[`cells_title()`](https://gt.rstudio.com/reference/cells_title.md),
[`location-helper`](https://gt.rstudio.com/reference/location-helper.md)
