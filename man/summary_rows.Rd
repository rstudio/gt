% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/summary_rows.R
\name{summary_rows}
\alias{summary_rows}
\title{Add summary rows using aggregation functions}
\usage{
summary_rows(data, groups = NULL, columns = NULL, fns,
  missing_text = "---", formatter = fmt_number, ...)
}
\arguments{
\item{data}{a table object that is created using the \code{gt()} function.}

\item{groups}{the row groups labels that identify which summary rows will be
added.}

\item{columns}{the columns for which the summaries should be calculated. If
nothing is provided, then the supplied aggregation functions will be
applied to all columns.}

\item{fns}{functions used for aggregations. This can include base functions
like \code{mean}, \code{min}, \code{max}, \code{median}, \code{sd}, or
\code{sum} or any other user-defined aggregation function. The function(s)
should be supplied within a \code{list()}. Within that list, we can specify
the functions by use of function names (e.g., \code{"sum"}), the functions
themselves (e.g., \code{sum}), or one-sided R formulas by prefacing with a
\code{~} where \code{.} serves as the data to be summarized (e.g.,
\code{sum(., na.rm = TRUE)}). By using named arguments, the names will
serve as row labels for the corresponding summary rows (otherwise the
labels will be derived from the function names).}

\item{missing_text}{the text to be used in place of \code{NA} values in
summary cells with no data outputs.}

\item{formatter}{a formatter function name. These can be any of the
\code{fmt_*()}functions available in the package (e.g.,
\code{\link{fmt_number}()}, \code{link{fmt_percent}()}, etc.), or a custom
function using \code{\link{fmt}()}. The default function is
\code{\link{fmt_number}()} and its options can be accessed through
\code{...}.}

\item{...}{values passed to the \code{formatter} function, where the provided
values are to be in the form of named vectors. For example, when using the
default \code{formatter} function, \code{\link{fmt_number}()}, options such
as \code{decimals}, \code{use_seps}, and \code{locale} can be used.}
}
\value{
an object of class \code{gt_tbl}.
}
\description{
Add summary rows to one or more row groups by using the input data already
provided in the \code{\link{gt}()} function alongside any suitable
aggregation functions. Should we need to obtain the summary data for external
purposes, the \code{\link{extract_summary}()} can be used with a
\code{gt_tbl} object where summary rows were added via \code{summary_rows()}.
}
\section{Figures}{

\if{html}{\figure{man_summary_rows_1.svg}{options: width=100\%}}
}

\examples{
# Use `sp500` to create a gt table with
# row groups; create summary rows (`min`,
# `max`, `avg`) by row group, where each
# each row group is a week number
tbl_1 <-
  sp500 \%>\%
  dplyr::filter(
    date >= "2015-01-05" &
      date <="2015-01-16"
  ) \%>\%
  dplyr::arrange(date) \%>\%
  dplyr::mutate(
    week = paste0(
      "W", strftime(date, format = "\%V"))
  ) \%>\%
  dplyr::select(-adj_close, -volume) \%>\%
  gt(
    rowname_col = "date",
    groupname_col = "week"
  ) \%>\%
  summary_rows(
    groups = TRUE,
    columns = vars(open, high, low, close),
    fns = list(
      min = ~min(.),
      max = ~max(.),
      avg = ~mean(.)),
    formatter = fmt_number,
    use_seps = FALSE
  )

}
\concept{row addition functions}
